<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./form.css">
  
</head>
<body>
    <div class="form">
        <p class="title">Create Account</p>
        <p class="message">open a BankMe account with a few datails.</p>
        <div id="show" class="text-danger "></div>
            <div class="flex">
            <label>
                <input class="input" type="text" placeholder="" required="" id="firstName">
                <span>Firstname</span>
            </label>
    
            <label>
                <input class="input" type="text" placeholder="" required="" id="lastName">
                <span>Lastname</span>
            </label>
        </div>  

        <label>
          <input id="phone" class="input" type="number" placeholder="" required="" />
          <span>Phone</span>
        </label>
                
        <label>
            <input class="input" type="email" placeholder="" required="" id="email">
            <span>Email</span>
        </label> 
            
        <label>
            <input class="input" type="password" placeholder="" required="" id="password">
            <span>Password</span>
        </label>
        <label>
            <input class="input" type="password" placeholder="" required="" id="comPassword">
            <span>Confirm password</span>
        </label>
        <button onclick="submit()" class="submit">Submit</button>
        <p class="signin">Already have an acount ? <a onclick="signout()" href="#">Signin</a> </p>
      </div>

    <script>
      const user = []

      if(localStorage.getItem('bankuser')){
        user = JSON.parse(localStorage.getItem('bankuser'))
      }
      // let firstName = document.getElementById("firstName").value;
      // let lastName = document.getElementById("lastName").value;
      // let phone = document.getElementById("phone").value;
      // let email = document.getElementById("email").value;
      // let password = document.getElementById("password").value;
      // let comPassword = document.getElementById("comPassword").value;

      const submit = () => {
        if(firstName == "" || lastName == "" || phone == "" || email == "" || password == "" || comPassword == ""){
          alert("Please fill all the fields");
        } else if(password.value !== comPassword.value){
          alert("Password and Confirm password should be same");
        } else{
         let userDetails = {
           firstName: firstName.value,
           lastName: lastName.value,
           email: email.value,
           password: password.value,
           phone: phone.value,
           pin: "",
           acctNo: Number(phone.value),
           history: [],
           balance: 0,
           bvn: "",
         }
         let pusheduser = user.push(userDetails);
         console.log(pusheduser);

         if(pusheduser) {
          alert("Registration Successful");
          localStorage.setItem("bankuser", JSON.stringify(user));
          window.location.href = "signin.html";
         } else{
          alert("Registration Failed");
         }
        }
      }

      function signout(){
        window.location.href = "signin.html";
      }
    </script>
</body>
</html>